{"remainingRequest":"/Users/n/code/speedtoperformance/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/n/code/speedtoperformance/src/popup/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/n/code/speedtoperformance/src/popup/App.vue","mtime":1619330521172},{"path":"/Users/n/code/speedtoperformance/node_modules/babel-loader/lib/index.js","mtime":1607993736332},{"path":"/Users/n/code/speedtoperformance/node_modules/cache-loader/dist/cjs.js","mtime":1619144384763},{"path":"/Users/n/code/speedtoperformance/node_modules/vue-loader/lib/index.js","mtime":1615175898195}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IEhlbGxvV29ybGQgZnJvbSAnQC9jb21wb25lbnRzL0hlbGxvV29ybGQudnVlJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpjb25zdCBSRVBPUlRfRU5EUE9JTlQgPSAnaHR0cDovL3NwZWVkdG8ubmdyb2suaW8vYXBpL3YxL2V4dGVuc2lvbi9wZXJmb3JtYW5jZV9yZXBvcnRzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGNvbXBvbmVudHM6IHsgIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFwaUtleTogJycsCiAgICAgIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlLAogICAgICBlcnJvcjogZmFsc2UsCiAgICAgIHRhcmdldDogJycKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldEN1cnJlbnRVcmwoKSB7CiAgICAgIGxldCB2dWVfdGhpcyA9IHRoaXMgCiAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHthY3RpdmU6IHRydWUsIGxhc3RGb2N1c2VkV2luZG93OiB0cnVlfSwgdGFicyA9PiB7CgogICAgICAgIGxldCB1cmwgPSB0YWJzWzBdLnVybDsKICAgICAgICBjb25zb2xlLmxvZyhgc2V0dGluZyB1cmw6ICR7dXJsfWApCiAgICAgICAgdnVlX3RoaXMudGFyZ2V0ID0gdXJsIAogICAgICB9KTsKICAgIH0sCgogICAgbG9hZEFwaUtleTogZnVuY3Rpb24oKSB7CiAgICAgIGxldCB2dWVfdGhpcyA9IHRoaXMgCiAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFsnc3BlZWRfdG9fZXh0X2FwaV9rZXknXSwgZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC5zcGVlZF90b19leHRfYXBpX2tleSkgewogICAgICAgICAgdnVlX3RoaXMuYXBpS2V5ID0gcmVzdWx0LnNwZWVkX3RvX2V4dF9hcGlfa2V5CiAgICAgICAgICB2dWVfdGhpcy5hdXRoZW50aWNhdGVkID0gdHJ1ZQogICAgICAgICAgdnVlX3RoaXMuZXJyb3IgPSBmYWxzZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2dWVfdGhpcy5hcGlLZXkgPSAiIgogICAgICAgICAgdnVlX3RoaXMuYXV0aGVudGljYXRlZCA9IGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICBvcGVuT3B0aW9uc1BhZ2UoKSB7CiAgICAgIGNocm9tZS50YWJzLmNyZWF0ZSh7ICd1cmwnOiAnY2hyb21lOi8vZXh0ZW5zaW9ucy8/b3B0aW9ucz0nICsgY2hyb21lLnJ1bnRpbWUuaWQgfSk7CiAgICB9LAoKICAgIHJ1bkF1ZGl0KCkgewogICAgICBsZXQgdnVlX3RoaXMgPSB0aGlzIAoKICAgICAgYXhpb3MucG9zdChSRVBPUlRfRU5EUE9JTlQsIHsKICAgICAgICBhcGlfa2V5OiB0aGlzLmFwaUtleSwKICAgICAgICB1cmw6IHRoaXMudGFyZ2V0CiAgICAgIH0pCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICB9KQogICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgdnVlX3RoaXMuZXJyb3IgPSB0cnVlCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KQogICAgfQoKICB9LAogIGNvbXB1dGVkOiB7CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zZXRDdXJyZW50VXJsKCkKICAgIHRoaXMubG9hZEFwaUtleSgpCiAgfQoKfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"App.vue","sourceRoot":"src/popup","sourcesContent":["<template>\n  <div>\n    <h1>Web Performance</h1>\n    <hr>\n    <div v-if=\"!authenticated\">\n      <p>You aren't authenticated yet.</p>\n      <a href=\"#\" @click=\"openOptionsPage\">Enter Your API Key</a>\n    </div>\n    <div v-else>\n      <small>Run audit for: {{ target }}</small><br>\n      <a href=\"#\" @click=\"runAudit\">Audit</a>\n    </div>\n    \n  </div>\n</template>\n\n<script>\n//import HelloWorld from '@/components/HelloWorld.vue'\nimport axios from 'axios'\n\nconst REPORT_ENDPOINT = 'http://speedto.ngrok.io/api/v1/extension/performance_reports'\n\nexport default {\n  name: 'App',\n  components: {  },\n  data() {\n    return {\n      apiKey: '',\n      authenticated: false,\n      error: false,\n      target: ''\n    }\n  },\n  methods: {\n    setCurrentUrl() {\n      let vue_this = this \n      chrome.tabs.query({active: true, lastFocusedWindow: true}, tabs => {\n\n        let url = tabs[0].url;\n        console.log(`setting url: ${url}`)\n        vue_this.target = url \n      });\n    },\n\n    loadApiKey: function() {\n      let vue_this = this \n      chrome.storage.sync.get(['speed_to_ext_api_key'], function(result) {\n        if (result.speed_to_ext_api_key) {\n          vue_this.apiKey = result.speed_to_ext_api_key\n          vue_this.authenticated = true\n          vue_this.error = false\n        } else {\n          vue_this.apiKey = \"\"\n          vue_this.authenticated = false\n        }\n      })\n    },\n\n    openOptionsPage() {\n      chrome.tabs.create({ 'url': 'chrome://extensions/?options=' + chrome.runtime.id });\n    },\n\n    runAudit() {\n      let vue_this = this \n\n      axios.post(REPORT_ENDPOINT, {\n        api_key: this.apiKey,\n        url: this.target\n      })\n      .then(function (response) {\n        console.log(response)\n      })\n      .catch(function (error) {\n        vue_this.error = true\n        console.log(error);\n      })\n    }\n\n  },\n  computed: {\n  },\n  created() {\n    this.setCurrentUrl()\n    this.loadApiKey()\n  }\n\n}\n</script>\n\n<style>\nhtml {\n  width: 400px;\n  height: 400px;\n}\n</style>\n"]}]}