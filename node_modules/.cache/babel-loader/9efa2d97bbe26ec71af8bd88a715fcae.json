{"remainingRequest":"/Users/n/code/speedtoperformance/node_modules/thread-loader/dist/cjs.js!/Users/n/code/speedtoperformance/node_modules/babel-loader/lib/index.js!/Users/n/code/speedtoperformance/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/n/code/speedtoperformance/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/n/code/speedtoperformance/src/popup/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/n/code/speedtoperformance/src/popup/App.vue","mtime":1619330521172},{"path":"/Users/n/code/speedtoperformance/node_modules/cache-loader/dist/cjs.js","mtime":1619144384763},{"path":"/Users/n/code/speedtoperformance/node_modules/thread-loader/dist/cjs.js","mtime":1619144384767},{"path":"/Users/n/code/speedtoperformance/node_modules/babel-loader/lib/index.js","mtime":1607993736332},{"path":"/Users/n/code/speedtoperformance/node_modules/cache-loader/dist/cjs.js","mtime":1619144384763},{"path":"/Users/n/code/speedtoperformance/node_modules/vue-loader/lib/index.js","mtime":1615175898195}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy9pbXBvcnQgSGVsbG9Xb3JsZCBmcm9tICdAL2NvbXBvbmVudHMvSGVsbG9Xb3JsZC52dWUnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CnZhciBSRVBPUlRfRU5EUE9JTlQgPSAnaHR0cDovL3NwZWVkdG8ubmdyb2suaW8vYXBpL3YxL2V4dGVuc2lvbi9wZXJmb3JtYW5jZV9yZXBvcnRzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcGlLZXk6ICcnLAogICAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSwKICAgICAgZXJyb3I6IGZhbHNlLAogICAgICB0YXJnZXQ6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2V0Q3VycmVudFVybDogZnVuY3Rpb24gc2V0Q3VycmVudFVybCgpIHsKICAgICAgdmFyIHZ1ZV90aGlzID0gdGhpczsKICAgICAgY2hyb21lLnRhYnMucXVlcnkoewogICAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgICBsYXN0Rm9jdXNlZFdpbmRvdzogdHJ1ZQogICAgICB9LCBmdW5jdGlvbiAodGFicykgewogICAgICAgIHZhciB1cmwgPSB0YWJzWzBdLnVybDsKICAgICAgICBjb25zb2xlLmxvZygic2V0dGluZyB1cmw6ICIuY29uY2F0KHVybCkpOwogICAgICAgIHZ1ZV90aGlzLnRhcmdldCA9IHVybDsKICAgICAgfSk7CiAgICB9LAogICAgbG9hZEFwaUtleTogZnVuY3Rpb24gbG9hZEFwaUtleSgpIHsKICAgICAgdmFyIHZ1ZV90aGlzID0gdGhpczsKICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoWydzcGVlZF90b19leHRfYXBpX2tleSddLCBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC5zcGVlZF90b19leHRfYXBpX2tleSkgewogICAgICAgICAgdnVlX3RoaXMuYXBpS2V5ID0gcmVzdWx0LnNwZWVkX3RvX2V4dF9hcGlfa2V5OwogICAgICAgICAgdnVlX3RoaXMuYXV0aGVudGljYXRlZCA9IHRydWU7CiAgICAgICAgICB2dWVfdGhpcy5lcnJvciA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2dWVfdGhpcy5hcGlLZXkgPSAiIjsKICAgICAgICAgIHZ1ZV90aGlzLmF1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5PcHRpb25zUGFnZTogZnVuY3Rpb24gb3Blbk9wdGlvbnNQYWdlKCkgewogICAgICBjaHJvbWUudGFicy5jcmVhdGUoewogICAgICAgICd1cmwnOiAnY2hyb21lOi8vZXh0ZW5zaW9ucy8/b3B0aW9ucz0nICsgY2hyb21lLnJ1bnRpbWUuaWQKICAgICAgfSk7CiAgICB9LAogICAgcnVuQXVkaXQ6IGZ1bmN0aW9uIHJ1bkF1ZGl0KCkgewogICAgICB2YXIgdnVlX3RoaXMgPSB0aGlzOwogICAgICBheGlvcy5wb3N0KFJFUE9SVF9FTkRQT0lOVCwgewogICAgICAgIGFwaV9rZXk6IHRoaXMuYXBpS2V5LAogICAgICAgIHVybDogdGhpcy50YXJnZXQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHZ1ZV90aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldEN1cnJlbnRVcmwoKTsKICAgIHRoaXMubG9hZEFwaUtleSgpOwogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAiBA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,IAAA,eAAA,GAAA,8DAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,KAAA,EAAA,KAHA;AAIA,MAAA,MAAA,EAAA;AAJA,KAAA;AAMA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,UAAA,QAAA,GAAA,IAAA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AAAA,QAAA,MAAA,EAAA,IAAA;AAAA,QAAA,iBAAA,EAAA;AAAA,OAAA,EAAA,UAAA,IAAA,EAAA;AAEA,YAAA,GAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA;AACA,QAAA,OAAA,CAAA,GAAA,wBAAA,GAAA;AACA,QAAA,QAAA,CAAA,MAAA,GAAA,GAAA;AACA,OALA;AAMA,KATA;AAWA,IAAA,UAAA,EAAA,sBAAA;AACA,UAAA,QAAA,GAAA,IAAA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,sBAAA,CAAA,EAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,oBAAA,EAAA;AACA,UAAA,QAAA,CAAA,MAAA,GAAA,MAAA,CAAA,oBAAA;AACA,UAAA,QAAA,CAAA,aAAA,GAAA,IAAA;AACA,UAAA,QAAA,CAAA,KAAA,GAAA,KAAA;AACA,SAJA,MAIA;AACA,UAAA,QAAA,CAAA,MAAA,GAAA,EAAA;AACA,UAAA,QAAA,CAAA,aAAA,GAAA,KAAA;AACA;AACA,OATA;AAUA,KAvBA;AAyBA,IAAA,eAzBA,6BAyBA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AAAA,eAAA,kCAAA,MAAA,CAAA,OAAA,CAAA;AAAA,OAAA;AACA,KA3BA;AA6BA,IAAA,QA7BA,sBA6BA;AACA,UAAA,QAAA,GAAA,IAAA;AAEA,MAAA,KAAA,CAAA,IAAA,CAAA,eAAA,EAAA;AACA,QAAA,OAAA,EAAA,KAAA,MADA;AAEA,QAAA,GAAA,EAAA,KAAA;AAFA,OAAA,EAIA,IAJA,CAIA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,OANA,WAOA,UAAA,KAAA,EAAA;AACA,QAAA,QAAA,CAAA,KAAA,GAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAVA;AAWA;AA3CA,GAXA;AAyDA,EAAA,QAAA,EAAA,EAzDA;AA2DA,EAAA,OA3DA,qBA2DA;AACA,SAAA,aAAA;AACA,SAAA,UAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\n  <div>\n    <h1>Web Performance</h1>\n    <hr>\n    <div v-if=\"!authenticated\">\n      <p>You aren't authenticated yet.</p>\n      <a href=\"#\" @click=\"openOptionsPage\">Enter Your API Key</a>\n    </div>\n    <div v-else>\n      <small>Run audit for: {{ target }}</small><br>\n      <a href=\"#\" @click=\"runAudit\">Audit</a>\n    </div>\n    \n  </div>\n</template>\n\n<script>\n//import HelloWorld from '@/components/HelloWorld.vue'\nimport axios from 'axios'\n\nconst REPORT_ENDPOINT = 'http://speedto.ngrok.io/api/v1/extension/performance_reports'\n\nexport default {\n  name: 'App',\n  components: {  },\n  data() {\n    return {\n      apiKey: '',\n      authenticated: false,\n      error: false,\n      target: ''\n    }\n  },\n  methods: {\n    setCurrentUrl() {\n      let vue_this = this \n      chrome.tabs.query({active: true, lastFocusedWindow: true}, tabs => {\n\n        let url = tabs[0].url;\n        console.log(`setting url: ${url}`)\n        vue_this.target = url \n      });\n    },\n\n    loadApiKey: function() {\n      let vue_this = this \n      chrome.storage.sync.get(['speed_to_ext_api_key'], function(result) {\n        if (result.speed_to_ext_api_key) {\n          vue_this.apiKey = result.speed_to_ext_api_key\n          vue_this.authenticated = true\n          vue_this.error = false\n        } else {\n          vue_this.apiKey = \"\"\n          vue_this.authenticated = false\n        }\n      })\n    },\n\n    openOptionsPage() {\n      chrome.tabs.create({ 'url': 'chrome://extensions/?options=' + chrome.runtime.id });\n    },\n\n    runAudit() {\n      let vue_this = this \n\n      axios.post(REPORT_ENDPOINT, {\n        api_key: this.apiKey,\n        url: this.target\n      })\n      .then(function (response) {\n        console.log(response)\n      })\n      .catch(function (error) {\n        vue_this.error = true\n        console.log(error);\n      })\n    }\n\n  },\n  computed: {\n  },\n  created() {\n    this.setCurrentUrl()\n    this.loadApiKey()\n  }\n\n}\n</script>\n\n<style>\nhtml {\n  width: 400px;\n  height: 400px;\n}\n</style>\n"],"sourceRoot":"src/popup"}]}